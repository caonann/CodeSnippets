# cpp 多线程编程精要

# 多线程的生命周期管理
#### 析构函数遇到多线程

当一个对象同时被多个线程看到时，析构的时候如何保证正确性

1. 析构一个对象时，如何得知没有其他线程正在调用该对象的成员函数？
2. 如何保证执行成员函数时，对象不被另一个线程析构？
3. 调用成员函数前，如何得知该对象还或者？此时它的析构函数会不会恰巧在另一个线程执行到一半？

#### 线程安全定义

根据[JCP]定义：

1. 多个线程同时访问时，表现行为正确
2. 无论操作系统如何调度这些线程，无论这些线程的执行顺序如何交织
3. 调用端代码无需额外做同步操作



shared_ptr 避免循环引用：

owner持有只想child的shared_ptr,child持有指向owner的weak_ptr

# todo
[ ] 实现一个线程池
[ ] 多线程间的同步